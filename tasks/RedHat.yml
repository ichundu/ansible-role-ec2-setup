---
# tasks file for ec2-setup | RHEL

- name: Install python selinux libraries
  yum:
    name: "{{ item }}"
    state: present
  with_items: "{{ ec2_setup_python }}"

- name: Install epel repository
  yum:
    name: "{{ epel_repo }}"
    state: present
  when: ec2_setup_epel

- name: Import epel rpm gpg key
  rpm_key:
    key: "{{ epel_rpm_gpg }}"
  when: ec2_setup_epel

- name: Set timezone | RHEL 7
  timezone:
    name: "{{ ec2_setup_timezone }}"
  when:
    - ansible_os_family == "RedHat"
    - ansible_distribution_major_version == "7"

- name: Set timezone | RHEL 6
  file:
    src: "/usr/share/zoneinfo/{{ ec2_setup_timezone }}"
    dest: /etc/localtime
    force: yes
    state: link
  when:
    - ansible_os_family == "RedHat"
    - ansible_distribution_major_version == "6"
